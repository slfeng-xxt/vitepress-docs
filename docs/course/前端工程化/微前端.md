# 微前端

:::tip
微前端是一种设计思想，它将前端应用拆分成多个独立的小应用，每个小应用可以独立开发、部署和升级，同时它们可以组合成一个完整的应用。
:::

## 1. 特点

- **独立开发**：每个微前端应用可以独立开发，使用不同的技术栈和框架。
- **独立部署**：每个微前端应用可以独立部署，不需要等待其他应用的开发和部署。
- **独立升级**：每个微前端应用可以独立升级，不需要等待其他应用升级。
- **组合使用**：多个微前端应用可以组合成一个完整的应用，每个应用可以独立展示和隐藏。
- **技术栈无关**：每个微前端应用可以使用不同的技术栈和框架，不需要统一技术栈。
- **环境隔离**：每个微前端应用可以有自己的运行环境，不需要共享全局变量和状态。
- **消息通信**：统一的通信方式，降低使用通信的成本；
- **依赖复用**：公共依赖可以复用，减少重复依赖；

## 2. 实现方式

### 2.1 iframe

iframe 是一种常见的微前端实现方式，它可以将一个网页嵌入到另一个网页中。iframe 的优点是简单易用，但是它的缺点是性能较差，而且它不能与父页面共享 JavaScript 上下文。

### 2.2 single-spa

single-spa 是一个基础的微前端框架，通俗点说，提供了生命周期的概念，并负责调度子应用的生命周期 挟持 url 变化事件和函数，url 变化时匹配对应子应用，并执行生命周期流程。

运行原理：

1. 注册子应用
2. 监听 url 变化
3. 匹配子应用
4. 加载子应用
5. 子应用卸载

### 2.3 qiankun

qiankun 基于single-spa，提供了更丰富的功能，如子应用之间的通信、子应用之间的样式隔离、子应用之间的资源加载等。

运行原理:

1. 主应用注册子应用
2. 主应用监听 url 变化
3. 主应用匹配子应用
4. 主应用加载子应用
5. 子应用卸载

### 2.4 EMP

EMP 是一个基于 webpack 的微前端框架，它可以将多个前端应用打包成一个完整的应用。EMP 的优点是性能较好，而且它可以与父页面共享 JavaScript 上下文。

### 2.5 wujie

wujie 是一个基于 iframe 的微前端框架，它可以将多个前端应用组合成一个完整的应用。wujie 的优点是性能较好，而且它可以与父页面共享 JavaScript 上下文。

## 3. 区别

|  | single-spa | qiankun | EMP | wujie |
| --- | --- | --- | --- | --- |
| 实现方式 | 基础框架 | 基于 single-spa | 基于 webpack | 基于 iframe |
| 优点 | 简单易用 | 功能丰富 | 性能较好 | 性能较好 |
| 缺点 | 性能较差 |  |  |  |
| 适用场景 | 简单的微前端应用 | 复杂的微前端应用 | 需要打包成完整应用的微前端应用 | 需要组合成完整应用的微前端应用 |
