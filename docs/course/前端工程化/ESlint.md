# ESlint9

:::tip
竞品：oxclint、 pretter
:::

## 1. 整体架构设计

- 1.核心引擎： 负责整个ESLint的初始化、配置加载、文件解析、规则应用等核心工作
- 2.解析器（Parser）：Eslint通过解析器将源代码转换为AST（抽象语法树），便于规则引擎进行静态分析
- 3.规则（Rules）：定义了一系列的代码质量检查规则，用于检查代码是否符合规范
- 4.插件（Plugins）：通过插件机制，用于扩展ESLint的功能，可以自定义规则、解析器等，使ESLint支持更多的编程语言和框架
- 5.配置（Configurations）：ESLint可以通过配置文件来配置不同文件、规则和插件的组合，使得ESLint可以适应不同的项目需求

## 2. 来源

### 2.1 什么是规范化？为什么需要规范化？

- 规范化：是指为了确保代码的一致性和可维护性，对代码风格、命名规则、代码结构等方面进行统一的规定和约束

```txt
例如：
1. 文件结构： monorepo
2. 命名规则：（自己公司的规范手册）
3. 提交规范： commitlint
```

#### 2.1.1 代码层面

使用： eslint9 oxc pretter，通过卡点的方式，保证代码质量

#### 2.1.2 代码规范化的常见问题

- 代码风格不一致：不同的团队成员可能使用不同的代码风格，导致代码风格不一致，影响代码的可读性和可维护性
- 命名不规范：不规范的命名规则可能导致代码难以理解，增加维护成本
- 代码结构混乱：不规范的代码结构可能导致代码难以阅读和维护，增加调试和修复问题的难度

#### 2.1.3 解决了什么问题？

- 代码规范化的好处：
  - 提高代码的可读性和可维护性：统一的代码风格和命名规则使得代码更加清晰易懂，便于团队成员之间的协作和维护
  - 避免代码冲突：统一的代码规范可以减少团队成员之间的代码冲突，提高团队协作效率
  - 提高代码质量：代码规范可以确保代码遵循最佳实践，避免一些常见的错误和问题，提高代码质量

## 3. Eslint的配置

### 3.1 规则（三个等级）

- off：关闭规则
- warn：警告，不会退出编译
- error：错误，会退出编译

### 3.2 与 ci/cd 的结合

- ci/cd 工作流方面增加 eslint 的卡点，保证代码质量。因为commitlint校验过程可以绕过检查，所以需要工作流里面增加eslint的卡点

## 4. 实践

### 4.1 应用范围

先编译文件，后校验。（都要涉及到ast）

- .js(x) : 通过 babel vite esbuild swc来编译
- .ts(x) : 通过 typescript 来编译
- .vue   : 通过 vite-plugin-vue 来编译

:::tip
这就是 voidzero 要通过rust重构整个工具链, 目的是: 提高编译速度，***统一编译、校验、格式化中 AST的过程***
:::
