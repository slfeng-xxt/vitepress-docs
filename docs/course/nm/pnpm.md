# pnpm

## 0. 扩展

### 0.1 文件本质

本质定义：在操作系统中，文件实际上是一个指针，指向外部存储地址（如硬盘、U盘或网络存储）。
存储原理：文件本身不包含数据内容，而是通过指针关联磁盘上的具体数据块（如abc.txt指向磁盘特定区域）。
删除机制：删除文件时仅删除指针，因此无论文件大小，删除速度都很快（数据实际仍存在于磁盘，直到被覆盖）。

### 0.2 文件拷贝

#### 0.2.1 完整过程

数据复制：将原文件指针指向的磁盘数据完整复制到新位置
新建指针：创建新文件并指向复制后的数据副本

#### 0.2.2 特性

修改副本不影响原文件（数据完全独立）
会产生额外的磁盘空间占用（数据被完整复制）

### 0.3 硬链接（hard link）

#### 0.3.1 概念

核心原理：将文件A的指针复制到文件B，使两者指向同一磁盘数据
Unix起源：概念最早来自Unix操作系统，现被Linux/Windows等系统支持
与拷贝的区别：不产生数据副本，仅增加指向同一数据的指针

#### 0.3.2 特性

- 磁盘效率：
不产生额外磁盘占用（多个文件共享同一数据）
显示文件大小时会重复计算（但实际只占一份空间）

- 独立性：
删除任一链接不影响其他链接访问数据
必须删除所有链接才会使数据不可访问
数量限制：可为同一文件创建无限个硬链接

#### 0.3.3 window创建硬链接

```txt
版本要求：Windows Vista开始支持硬链接操作
创建限制：
必须使用cmd命令提示符（不支持PowerShell）
不能跨盘符创建（如C盘文件链接到D盘）
不支持文件夹硬链接（仅限文件）
```

***创建步骤：***

- 以管理员身份运行cmd
- 使用命令：mklink /h <新文件路径> <目标文件路径>
- 注意路径使用反斜杠（如temp\article.txt）

***效果验证：***

- 修改任一链接文件会同步改变所有链接内容
- 文件属性中无法识别硬链接关系（操作系统视为普通文件）

### 0.4 软连接（soft link），也叫符号链接（Symbolic link）

定义：符号链接（symbol link）又称软链接，是为文件或文件夹创建的指向性链接
创建方法：为文件/文件夹A创建符号链接B时，B直接指向A本身
特性：
目录支持：可以为文件夹创建（区别于硬链接）
依赖关系：若删除原始文件A，链接B将失效
跨盘符限制：Windows系统中不建议跨盘符创建
图标标识：Windows中显示为带箭头的特殊图标

#### Windows创建

```txt
命令格式：mklink /d 链接名称 目标文件
参数说明：
/d：创建目录符号链接（不加则为文件链接）
早期系统需使用junction工具替代
```

### 0.5 符号链接与硬链接区别

核心差异：

- 对象限制：

    硬链接仅支持文件

    符号链接支持文件和目录
- 关联方式：

    硬链接直接关联磁盘数据，与原文件解除绑定

    符号链接始终关联原文件路径
- 删除影响：

    删除硬链接原文件，其他链接仍有效

    删除符号链接原文件，所有链接失效

适用对象差异:
硬链接仅能链接文件
符号链接可以链接目录和文件

关联方式差异:
硬链接在链接完成后仅和文件内容关联，与原文件完全独立
符号链接始终与原文件关联，与文件内容不直接相关

磁盘占用差异:
硬链接不会产生额外磁盘占用，多个链接共享相同磁盘内容
符号链接需要额外存储指向信息

## 1. pnpm原理

- [pnpm剖析(简介、硬/软链接、实操、配置、原理)](https://www.cnblogs.com/yaopengfei/p/17203131.html)
