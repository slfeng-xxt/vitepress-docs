# VueçŠ¶æ€ç®¡ç†

## 0.å‰ç«¯çŠ¶æ€ç®¡ç†å‡ºç°çš„æ„ä¹‰ä»¥åŠè§£å†³çš„é—®é¢˜

å¾ˆæ—©æˆ‘ä»¬ä½¿ç”¨åŸç”Ÿ js æˆ–è€… jQuery æŠ€æœ¯æ˜¯é€šè¿‡æ“ä½œ DOM å®Œæˆè§†å›¾æ¸²æŸ“çš„ã€‚è€Œåœ¨ Vue æˆ– React æ¡†æ¶é‡Œï¼Œæˆ‘ä»¬å¼ºè°ƒè§†å›¾æ˜¯ç”±çŠ¶æ€æ›´æ–°é©±åŠ¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªéœ€è¦æŠŠç„¦ç‚¹æ”¾åœ¨çŠ¶æ€ä¸Šï¼ŒçŠ¶æ€æ€ä¹ˆæ›´æ–°ï¼Œè‡ªç„¶ä¼šå°†ç»“æœåé¦ˆåˆ°é¡µé¢ä¸Šã€‚

### æ„ä¹‰

- çŠ¶æ€ç®¡ç†æ˜¯ç®¡ç†åº”ç”¨ä¸­çš„æ•°æ®ï¼Œåœ¨å•é¡µé¢åº”ç”¨ä¸­ï¼Œæ•°æ®æ˜¯åˆ†æ•£åœ¨å„ä¸ªç»„ä»¶ä¸­çš„ï¼Œå¦‚æœéœ€è¦å…±äº«æ•°æ®ï¼Œé‚£ä¹ˆå°±éœ€è¦é€šè¿‡propsã€äº‹ä»¶ã€vuexç­‰æ–¹å¼è¿›è¡Œä¼ é€’ï¼Œè¿™æ ·ä¼šå¯¼è‡´ä»£ç å†—ä½™ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚
- çŠ¶æ€ç®¡ç†å¯ä»¥ç»Ÿä¸€ç®¡ç†åº”ç”¨ä¸­çš„æ•°æ®ï¼Œä½¿å¾—æ•°æ®æ›´åŠ æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤ã€‚

### è§£å†³çš„é—®é¢˜

- æ•°æ®å…±äº«
- æ•°æ®ç®¡ç†
- æ•°æ®æŒä¹…åŒ–
- æ•°æ®åŒæ­¥

### å®è·µ

- åˆ†ç¦»çŠ¶æ€é€»è¾‘å’Œä¸šåŠ¡é€»è¾‘
- é€‰æ‹©åˆé€‚çš„çŠ¶æ€ç®¡ç†å·¥å…·(æ˜¯å¦ä½¿ç”¨çœ‹å®é™…æƒ…å†µ)
- Vuex3.xåªé€‚é…Vue2ï¼ŒVuex4.xé€‚é…Vue3ï¼›æœ€å¥½ä½¿ç”¨pinia,å®ƒé€‚åº”vue2å’Œvue3
- é¿å…ç›´æ¥æ“ä½œstoreçš„çŠ¶æ€ï¼Œè€Œæ˜¯é€šè¿‡gettersæ¥è¯»å–ï¼Œé€šè¿‡actionsæ¥ä¿®æ”¹ã€‚æé«˜äº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚
- piniaæœ¬èº«ä½¿ç”¨çš„æ˜¯tsï¼Œæ‰€ä»¥ä»£ç æ›´åŠ ä¸¥è°¨ï¼Œä¸å®¹æ˜“å‡ºé”™ã€‚
- å°†çŠ¶æ€åˆ’åˆ†ä¸ºå¤šä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—è´Ÿè´£ç®¡ç†ä¸€éƒ¨åˆ†çŠ¶æ€ï¼Œè¿™æ ·ä½¿å¾—çŠ¶æ€ç®¡ç†æ›´åŠ æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤ã€‚vuexæ¨¡å—åŒ–ä¸ºåµŒå¥—ï¼Œpiniaæ¨¡å—åŒ–ä¸ºæ‰å¹³ã€‚
- è¾…åŠ©å‡½æ•°çš„ä½¿ç”¨ï¼Œå¦‚mapStateã€mapGettersã€mapActionsç­‰ï¼Œä½¿å¾—ä»£ç æ›´åŠ ç®€æ´ï¼Œæ˜“äºç†è§£ã€‚
- è®¢é˜…stateå’Œaction
- æ’ä»¶çš„ä½¿ç”¨ï¼Œå¦‚æŒä¹…åŒ–æ’ä»¶ã€è°ƒè¯•æ’ä»¶ç­‰ï¼Œä½¿å¾—çŠ¶æ€ç®¡ç†æ›´åŠ çµæ´»ï¼Œæ˜“äºæ‰©å±•ã€‚

## çŠ¶æ€ç®¡ç†å·¥å…·çš„é€‰æ‹©

- [Vuex](https://vuex.vuejs.org/zh/guide/)
- [Pinia](https://pinia.vuejs.org/zh/introduction.html)

## 1. å•ä¸ªç»„ä»¶ä¸­çš„çŠ¶æ€ç®¡ç†

### 1.1 vueä¸­æ•°æ®é©±åŠ¨å’Œç»„ä»¶åŒ–çš„ç†è§£

- æ•°æ®é©±åŠ¨ï¼šæ•°æ®å˜åŒ–ï¼Œè§†å›¾è‡ªåŠ¨æ›´æ–°
- ç»„ä»¶åŒ–ï¼šå°†é¡µé¢æ‹†åˆ†æˆå¤šä¸ªç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶è´Ÿè´£æ¸²æŸ“é¡µé¢çš„æŸä¸€éƒ¨åˆ†

### 1.2 å•ä¸ªç»„ä»¶ä¸­çš„çŠ¶æ€ç®¡ç†ï¼ˆæ•°æ®é©±åŠ¨ï¼‰

åœ¨ Vue ä¸­ï¼Œå•ä¸ªç»„ä»¶çš„çŠ¶æ€ç®¡ç†å¯ä»¥é€šè¿‡ç»„ä»¶çš„ data é€‰é¡¹æ¥å®ç°ã€‚data é€‰é¡¹æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«äº†ç»„ä»¶çš„çŠ¶æ€æ•°æ®ã€‚ä¾‹å¦‚ï¼š

- template -> è§†å›¾
- script -> data -> çŠ¶æ€æ•°æ®
- script -> methods -> æ›´æ–°çŠ¶æ€æ•°æ®çš„æ–¹æ³•

```vue
<template>
  <div>
    <p>{{ count }}</p>
    <button @click="increment">Increment</button>
  </div>
</template>
<script>
export default {
  data() {
    return {
      count: 0
    }
  },
  methods: {
    increment() {
      this.count++
    }
  }
}
</script>
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œcount æ˜¯ç»„ä»¶çš„çŠ¶æ€æ•°æ®ï¼Œincrement æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæ›´æ–° count çš„å€¼ã€‚å½“ count çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°ã€‚

## 2. å¤šä¸ªç»„ä»¶ä¹‹é—´çš„çŠ¶æ€ç®¡ç†

### 2.1 çˆ¶å­ç»„ä»¶ä¹‹é—´çš„çŠ¶æ€ç®¡ç†

åœ¨ Vue ä¸­ï¼Œçˆ¶å­ç»„ä»¶ä¹‹é—´çš„çŠ¶æ€ç®¡ç†å¯ä»¥é€šè¿‡ props å’Œäº‹ä»¶æ¥å®ç°ã€‚çˆ¶ç»„ä»¶å¯ä»¥é€šè¿‡ props å‘å­ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œå­ç»„ä»¶å¯ä»¥é€šè¿‡äº‹ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ã€‚ä¾‹å¦‚ï¼š

- çˆ¶ç»„ä»¶ -> å­ç»„ä»¶ï¼šprops
- å­ç»„ä»¶ -> çˆ¶ç»„ä»¶ï¼šäº‹ä»¶

```vue
<!-- çˆ¶ç»„ä»¶ -->
<template>
  <div>
    <p>{{ count }}</p>
    <button @click="increment">Increment</button>
    <ChildComponent :count="count" @increment="increment" /><!-- é€šè¿‡propså‘å­ç»„ä»¶ä¼ é€’æ•°æ® -->
  </div>
</template>
<script>
import ChildComponent from './ChildComponent.vue'

export default {
  components: {
    ChildComponent
  },
  data() {
    return {
      count: 0
    }
  },
  methods: {
    increment() {
      this.count++
    }
  }
}
</script>

<!-- å­ç»„ä»¶ -->
<template>
  <div>
    <p>{{ count }}</p>
    <button @click="increment">Increment</button>
  </div>
</template>
<script>
export default {
  props: {
    count: {
      type: Number,
      required: true
    }
  },
  methods: {
    increment() {
      this.$emit('increment') // é€šè¿‡äº‹ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®
    }
  }
}
</script>
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œçˆ¶ç»„ä»¶é€šè¿‡ props å‘å­ç»„ä»¶ä¼ é€’ count çš„å€¼ï¼Œå­ç»„ä»¶é€šè¿‡äº‹ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’ increment çš„æ–¹æ³•ã€‚å½“ count çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°ã€‚

### 2.2 å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„çŠ¶æ€ç®¡ç†

åœ¨ Vue ä¸­ï¼Œå…„å¼Ÿç»„ä»¶ä¹‹é—´çš„çŠ¶æ€ç®¡ç†å¯ä»¥é€šè¿‡äº‹ä»¶æ€»çº¿æˆ–è€… Vuex æ¥å®ç°ã€‚

**äº‹ä»¶æ€»çº¿**æ˜¯ä¸€ç§ç®€å•çš„çŠ¶æ€ç®¡ç†æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªç©ºçš„ Vue å®ä¾‹æ¥å®ç°ã€‚ä¾‹å¦‚ï¼š

- å…„å¼Ÿç»„ä»¶ -> å…„å¼Ÿç»„ä»¶ï¼šäº‹ä»¶æ€»çº¿

```vue
<!-- çˆ¶ç»„ä»¶ -->
<template>
  <div>
    <ChildComponent1 />
    <ChildComponent2 />
  </div>
</template>
<script>
import ChildComponent1 from './ChildComponent1.vue'
import ChildComponent2 from './ChildComponent2.vue'

export default {
  components: {
    ChildComponent1,
    ChildComponent2
  }
}
</script>

<!-- å­ç»„ä»¶1 -->
<template>
  <div>
    <p>{{ count }}</p>
    <button @click="increment">Increment</button>
  </div>
</template>
<script>
import { EventBus } from '../event-bus'

export default {
  data() {
    return {
      count: 0
    }
  },
  methods: {
    increment() {
      this.count++
      EventBus.$emit('increment', this.count) // é€šè¿‡äº‹ä»¶æ€»çº¿å‘å…„å¼Ÿç»„ä»¶ä¼ é€’æ•°æ®
    }
  }
}
</script>

<!-- å­ç»„ä»¶2 -->
<template>
  <div>
    <p>{{ count }}</p>
  </div>
</template>
<script>
import { EventBus } from '../event-bus'

export default {
  data() {
    return {
      count: 0
    }
  },
  created() {
    EventBus.$on('increment', (count) => {
      this.count = count // é€šè¿‡äº‹ä»¶æ€»çº¿æ¥æ”¶å…„å¼Ÿç»„ä»¶ä¼ é€’çš„æ•°æ®
    })
  },
  beforeDestroy() {
    EventBus.$off('increment') // åœ¨ç»„ä»¶é”€æ¯å‰ï¼Œå–æ¶ˆäº‹ä»¶ç›‘å¬
  }
}
</script>
```

```js
// event-bus.js
import Vue from 'vue'
export const EventBus = new Vue()
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå­ç»„ä»¶1é€šè¿‡äº‹ä»¶æ€»çº¿å‘å…„å¼Ÿç»„ä»¶2ä¼ é€’ count çš„å€¼ï¼Œå­ç»„ä»¶2é€šè¿‡äº‹ä»¶æ€»çº¿æ¥æ”¶å…„å¼Ÿç»„ä»¶1ä¼ é€’çš„æ•°æ®ã€‚å½“ count çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°ã€‚

### 2.3 å¤šä¸ªç»„ä»¶ä¹‹é—´çš„çŠ¶æ€ç®¡ç†

åœ¨ Vue ä¸­ï¼Œå¤šä¸ªç»„ä»¶ä¹‹é—´çš„çŠ¶æ€ç®¡ç†å¯ä»¥é€šè¿‡ Vuex æ¥å®ç°ã€‚Vuex æ˜¯ä¸€ä¸ªä¸“é—¨ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼å’Œåº“ã€‚å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚

#### 2.3.1 Vuex çš„æ ¸å¿ƒæ¦‚å¿µåŒ…æ‹¬

- stateï¼šå­˜å‚¨åº”ç”¨çš„çŠ¶æ€æ•°æ®
- gettersï¼šä» state ä¸­æ´¾ç”Ÿå‡ºä¸€äº›çŠ¶æ€
- mutationsï¼šä¿®æ”¹ state çš„å”¯ä¸€æ–¹æ³•
- actionsï¼šå¤„ç†å¼‚æ­¥æ“ä½œï¼Œå¹¶é€šè¿‡æäº¤ mutations æ¥ä¿®æ”¹ state
- modulesï¼šå°† store åˆ†å‰²æˆæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—æ‹¥æœ‰è‡ªå·±çš„ stateã€mutationsã€actionsã€getters

Vuex çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š

```js
// store.js
import Vue from 'vue'
import Vuex from 'vuex'

Vue.use(Vuex)

export default new Vuex.Store({
  state: {
    count: 0
  },
  getters: {
    doubleCount: state => state.count * 2
  },
  mutations: {
    increment(state) {
      state.count++
    }
  },
  actions: {
    incrementAsync({ commit }) {
      setTimeout(() => {
        commit('increment')
      }, 1000)
    }
  },
  modules: {
    // æ¨¡å—
  }
})
```

```js
//  main.js
import Vue from 'vue'
import App from './App.vue'
import store from './store'

new Vue({
  store,
  render: h => h(App)
}).$mount('#app')
```

å…±äº«ä¸Šé¢æ•°æ®çš„å…¶ä¸­ä¸€ä¸ªç»„ä»¶ğŸ‘‡ğŸ»

```vue
<template>
  <div>
    <p>{{ count }}</p>
    <p>{{ doubleCount }}</p>
    <button @click="increment">Increment</button>
    <button @click="incrementAsync">Increment Async</button>
    <!-- commitè§¦å‘ -->
     <button @click="incrementByCommit">Increment Commit</button>
    <!-- dispatchè§¦å‘ -->
    <button @click="incrementByDispatch">Increment Dispatch</button>
  </div>
</template>
<script>
import { mapState, mapGetters, mapMutations, mapActions } from 'vuex'

export default {

  computed: {
    // mapState mapGettersçš„åº”ç”¨: å°† store ä¸­çš„ state å’Œ getters æ˜ å°„åˆ°ç»„ä»¶çš„è®¡ç®—å±æ€§ä¸­, ä»è€Œå¯ä»¥ç›´æ¥è®¿é—® store ä¸­çš„ state å’Œ getters
    ...mapState(['count']),
    ...mapGetters(['doubleCount'])
  },
  methods: {
    // mapMutations mapActionsçš„åº”ç”¨: å°† store ä¸­çš„ mutations å’Œ actions æ˜ å°„åˆ°ç»„ä»¶çš„æ–¹æ³•ä¸­, ä»è€Œå¯ä»¥ç›´æ¥è°ƒç”¨ store ä¸­çš„ mutations å’Œ actions
    ...mapMutations(['increment']),
    ...mapActions(['incrementAsync']),
    // storeä¸­ dispatch commitçš„åº”ç”¨
    incrementByCommit() {
      this.$store.commit('increment')
    },
    incrementByDispatch() {
      this.$store.dispatch('incrementAsync')
    }
  }
}
</script>
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œstore.js å®šä¹‰äº† stateã€gettersã€mutationsã€actions å’Œ modulesã€‚main.js å°† store æ³¨å…¥åˆ° Vue å®ä¾‹ä¸­ã€‚
ç»„ä»¶ä¸­é€šè¿‡ mapStateã€mapGettersã€mapMutations å’Œ mapActions æ¥è®¿é—®å’Œä¿®æ”¹ stateã€‚å½“ state çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°ã€‚

#### 2.3.2 Pinia çš„æ ¸å¿ƒæ¦‚å¿µåŒ…æ‹¬

- stateï¼šå­˜å‚¨åº”ç”¨çš„çŠ¶æ€æ•°æ®
- gettersï¼šä» state ä¸­æ´¾ç”Ÿå‡ºä¸€äº›çŠ¶æ€
- actionsï¼šæ”¯æŒå¼‚æ­¥æ“ä½œï¼Œæ¥ä¿®æ”¹ state
- æ’ä»¶ï¼šå¯ä»¥æ‰©å±• Pinia çš„åŠŸèƒ½

:::tip
ç”±äºæœ‰äº†åº•å±‚ API çš„æ”¯æŒï¼ŒPinia store ç°åœ¨å®Œå…¨æ”¯æŒæ‰©å±•ã€‚ä»¥ä¸‹æ˜¯ä½ å¯ä»¥æ‰©å±•çš„å†…å®¹ï¼š

ä¸º store æ·»åŠ æ–°çš„å±æ€§

å®šä¹‰ store æ—¶å¢åŠ æ–°çš„é€‰é¡¹

ä¸º store å¢åŠ æ–°çš„æ–¹æ³•

åŒ…è£…ç°æœ‰çš„æ–¹æ³•

æ”¹å˜ç”šè‡³å–æ¶ˆ action

å®ç°å‰¯ä½œç”¨ï¼Œå¦‚æœ¬åœ°å­˜å‚¨

ä»…åº”ç”¨æ’ä»¶äºç‰¹å®š store
:::

Pinia æ˜¯ Vue 3 çš„çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒæ˜¯ä¸€ä¸ªè½»é‡çº§ã€ç®€å•æ˜“ç”¨çš„çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚Pinia çš„è®¾è®¡ç›®æ ‡æ˜¯æä¾›ä¸€ç§æ›´ç®€å•ã€æ›´çµæ´»çš„çŠ¶æ€ç®¡ç†æ–¹å¼ï¼ŒåŒæ—¶ä¿æŒä¸ Vuex çš„å…¼å®¹æ€§ã€‚

Pinia çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š

```js
// store.js
import { defineStore } from 'pinia'

// æ–¹å¼ä¸€ï¼šä¼ å…¥å®šä¹‰å¯¹è±¡ options api
export const useStore = defineStore('main', {
  state: () => ({
    count: 0
  }),
  getters: {
    doubleCount: (state) => state.count * 2
  },
  actions: {
    increment() {
      this.count++
    },
    incrementAsync() {
      setTimeout(() => {
        this.count++
      }, 1000)
    }
  }
})

// æ–¹å¼äºŒï¼šä¼ å…¥å‡½æ•° composition api
export const useStore2 = defineStore('main2', () => {
  const count = ref(0) // ref --> state
  const doubleCount = computed(() => count.value * 2) // computed --> getters

  function increment() { // function --> actions
    count.value++
  }

  function incrementAsync() { // function --> actions
    setTimeout(() => {
      count.value++
    }, 1000)
  }

  return { count, doubleCount, increment, incrementAsync }
})
```

```vue
<!-- ç»„ä»¶ -->
<template>
  <div>
    <p>{{ count }}</p>
    <p>{{ doubleCount }}</p>
    <button @click="increment">Increment</button>
    <button @click="incrementAsync">Increment Async</button>
  </div>
</template>
<script>
import { useStore } from './store'

export default defineComponent({
  setup() {
    const store = useStore()

    return {
      count: store.count,
      doubleCount: store.doubleCount,
      increment: store.increment,
      incrementAsync: store.incrementAsync
    }
  }
})
</script>
```

## 3. VueXå®ç°åŸç†

VueX æ˜¯ Vue.js çš„çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒé€šè¿‡é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚VueX çš„å®ç°åŸç†ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š

1. **State**ï¼šå­˜å‚¨åº”ç”¨çš„çŠ¶æ€æ•°æ®ï¼Œå¯ä»¥é€šè¿‡ `this.$store.state` è®¿é—®ã€‚
2. **Getters**ï¼šä» state ä¸­æ´¾ç”Ÿå‡ºä¸€äº›çŠ¶æ€ï¼Œå¯ä»¥é€šè¿‡ `this.$store.getters` è®¿é—®ã€‚
3. **Mutations**ï¼šä¿®æ”¹ state çš„å”¯ä¸€æ–¹æ³•ï¼Œé€šè¿‡ `this.$store.commit` è§¦å‘ã€‚æ¯ä¸ª mutation éƒ½æœ‰ä¸€ä¸ªäº‹ä»¶ç±»å‹ (type) å’Œä¸€ä¸ªå›è°ƒå‡½æ•° (handler)ã€‚å›è°ƒå‡½æ•°æ¥æ”¶ state ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥æ‰§è¡ŒåŒæ­¥æ“ä½œã€‚
4. **Actions**ï¼šå¤„ç†å¼‚æ­¥æ“ä½œï¼Œå¹¶é€šè¿‡æäº¤ mutations æ¥ä¿®æ”¹ stateã€‚é€šè¿‡ `this.$store.dispatch` è§¦å‘ã€‚æ¯ä¸ª action éƒ½æœ‰ä¸€ä¸ªäº‹ä»¶ç±»å‹ (type) å’Œä¸€ä¸ªå›è°ƒå‡½æ•° (handler)ã€‚
å›è°ƒå‡½æ•°æ¥æ”¶ context ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥é€šè¿‡ `context.commit` æäº¤ mutationsï¼Œä¹Ÿå¯ä»¥é€šè¿‡ `context.state` è®¿é—® stateã€‚
5. **Modules**ï¼šå°† store åˆ†å‰²æˆæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—æ‹¥æœ‰è‡ªå·±çš„ stateã€gettersã€mutations å’Œ actionsã€‚å¯ä»¥é€šè¿‡ `this.$store.state.moduleName` è®¿é—®æ¨¡å—çš„çŠ¶æ€ï¼Œ
é€šè¿‡ `this.$store.commit('moduleName/mutationType')` æäº¤æ¨¡å—çš„ mutationï¼Œ
é€šè¿‡ `this.$store.dispatch('moduleName/actionType')` è§¦å‘æ¨¡å—çš„ actionã€‚

VueX çš„å®ç°åŸç†ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š

1. **åˆ›å»º store**ï¼šé€šè¿‡ `new Vuex.Store(options)` åˆ›å»º storeï¼Œoptions åŒ…å« stateã€gettersã€mutationsã€actions å’Œ modules ç­‰é…ç½®ã€‚
2. **åˆå§‹åŒ– state**ï¼šå°† options.state ä¸­çš„æ•°æ®è½¬æ¢ä¸ºå“åº”å¼æ•°æ®ï¼Œé€šè¿‡ `Vue.observable` æˆ– `Vue.reactive` å®ç°ã€‚
3. **åˆå§‹åŒ– getters**ï¼šå°† options.getters ä¸­çš„å‡½æ•°è½¬æ¢ä¸ºè®¡ç®—å±æ€§ï¼Œé€šè¿‡ `Vue.computed` å®ç°ã€‚
4. **åˆå§‹åŒ– mutations**ï¼šå°† options.mutations ä¸­çš„å‡½æ•°è½¬æ¢ä¸º mutationï¼Œé€šè¿‡ `Vue.set` å®ç°ã€‚
5. **åˆå§‹åŒ– actions**ï¼šå°† options.actions ä¸­çš„å‡½æ•°è½¬æ¢ä¸º actionï¼Œé€šè¿‡ `Promise` å®ç°ã€‚
6. **åˆå§‹åŒ– modules**ï¼šå°† options.modules ä¸­çš„æ¨¡å—è½¬æ¢ä¸º storeï¼Œé€’å½’è°ƒç”¨ `new Vuex.Store(options)` å®ç°ã€‚
7. **æä¾›è®¿é—®æ–¹æ³•**ï¼šé€šè¿‡ `this.$store.state`ã€`this.$store.getters`ã€`this.$store.commit` å’Œ `this.$store.dispatch` æä¾›è®¿é—®å’Œä¿®æ”¹ store çš„æ–¹æ³•ã€‚

## 4. Piniaå®ç°åŸç†

Pinia æ˜¯ Vue 3 çš„çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒçš„å®ç°åŸç†ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š

1. **State**ï¼šå­˜å‚¨åº”ç”¨çš„çŠ¶æ€æ•°æ®ï¼Œå¯ä»¥é€šè¿‡ `store.state` è®¿é—®ã€‚
2. **Getters**ï¼šä» state ä¸­æ´¾ç”Ÿå‡ºä¸€äº›çŠ¶æ€ï¼Œå¯ä»¥é€šè¿‡ `store.getters` è®¿é—®ã€‚
3. **Actions**ï¼šæ”¯æŒå¼‚æ­¥æ“ä½œï¼Œæ¥ä¿®æ”¹ stateã€‚é€šè¿‡ `store.actions` è®¿é—®ã€‚

Pinia çš„å®ç°åŸç†ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š

1. **åˆ›å»º store**ï¼šé€šè¿‡ `defineStore` å‡½æ•°åˆ›å»º storeï¼Œä¼ å…¥ store çš„åç§°å’Œé…ç½®å¯¹è±¡ã€‚
2. **åˆå§‹åŒ– state**ï¼šå°†é…ç½®å¯¹è±¡ä¸­çš„ state é€‰é¡¹è½¬æ¢ä¸ºå“åº”å¼æ•°æ®ï¼Œé€šè¿‡ `ref` æˆ– `reactive` å®ç°ã€‚
3. **åˆå§‹åŒ– getters**ï¼šå°†é…ç½®å¯¹è±¡ä¸­çš„ getters é€‰é¡¹è½¬æ¢ä¸ºè®¡ç®—å±æ€§ï¼Œé€šè¿‡ `computed` å®ç°ã€‚
4. **åˆå§‹åŒ– actions**ï¼šå°†é…ç½®å¯¹è±¡ä¸­çš„ actions é€‰é¡¹è½¬æ¢ä¸ºæ–¹æ³•ï¼Œé€šè¿‡ `function` å®ç°ã€‚
5. **æä¾›è®¿é—®æ–¹æ³•**ï¼šé€šè¿‡ `store.state`ã€`store.getters` å’Œ `store.actions` æä¾›è®¿é—®å’Œä¿®æ”¹ store çš„æ–¹æ³•ã€‚

## 5. æ€»ç»“

- VueX å’Œ Pinia éƒ½æ˜¯ Vue.js çš„çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒä»¬éƒ½æä¾›äº†ä¸€ç§é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€çš„æ–¹å¼ï¼Œä»¥ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚VueX æ˜¯ Vue 2 çš„çŠ¶æ€ç®¡ç†åº“ï¼Œè€Œ Pinia æ˜¯ Vue 3 çš„çŠ¶æ€ç®¡ç†åº“ã€‚
- VueX çš„å®ç°åŸç†ä¸»è¦åŒ…æ‹¬ stateã€gettersã€mutationsã€actions å’Œ modulesï¼Œè€Œ Pinia çš„å®ç°åŸç†ä¸»è¦åŒ…æ‹¬ stateã€getters å’Œ actionsã€‚
- VueX å’Œ Pinia éƒ½å¯ä»¥é€šè¿‡ mapStateã€mapGettersã€mapMutations å’Œ mapActions æ¥è®¿é—®å’Œä¿®æ”¹ stateã€‚

## 6. TODO

:::tip
è¯»æºç çš„å¥½å¤„ï¼š

1. æ‹“å®½è§†é‡ï¼Œæå‡ç¼–ç¨‹æ€ç»´

2. çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œé¿å…ä½¿ç”¨ä¸­äº§ç”Ÿbug

3. äº†è§£apièƒŒåçš„å®ç°åŸç†

ğŸ“¢æ³¨æ„äº‹é¡¹:

1. å¯¹å½“å‰æ¡†æ¶çš„APIä½¿ç”¨å·²ç»éå¸¸ç†Ÿæ‚‰ï¼›

2.è€å¿ƒï¼ˆæ…¢å°±æ˜¯å¿«ï¼‰
:::

- [ ] Vuex çš„æºç 
- [ ] Pinia çš„æºç 
